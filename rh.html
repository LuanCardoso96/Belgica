<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RH • Trabalhe Conosco | JF SILVA CONSTRUÇÕES</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      color: #333;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    /* Header */
    /* Efeito Glassmorphism - Header translúcido com blur */
    /* Origem: Design moderno inspirado em iOS e Material Design */
    .header {
      background: rgba(255, 255, 255, 0.95); /* Fundo semi-transparente */
      backdrop-filter: blur(20px); /* Efeito de desfoque do fundo */
      padding: 20px 0;
      position: sticky; /* Header fixo ao rolar */
      top: 0;
      z-index: 1000;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1); /* Sombra sutil */
    }

    .header-content {
      display: flex;
      align-items: center;
      justify-content: space-between;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }

    
    .nav-links {
      display: flex;
      gap: 30px;
      list-style: none;
    }

    .nav-links a {
      text-decoration: none;
      color: #333;
      font-weight: 500;
      transition: color 0.3s ease;
      position: relative;
    }

    .nav-links a:hover {
      color: #667eea;
    }

    /* Linha animada sob os links de navegação */
    /* Origem: Efeito de underline animado moderno */
    .nav-links a::after {
      content: ''; /* Pseudo-elemento vazio */
      position: absolute; /* Posicionamento absoluto */
      bottom: -5px; /* 5px abaixo do texto */
      left: 0; /* Alinhado à esquerda */
      width: 0; /* Começa com largura 0 */
      height: 2px; /* Altura da linha */
      background: #667eea; /* Cor da linha */
      transition: width 0.3s ease; /* Animação da largura */
    }

    /* Animação da linha no hover - Expande para 100% */
    /* Origem: Efeito de preenchimento progressivo */
    .nav-links a:hover::after {
      width: 100%; /* Linha expande para largura total */
    }

    /* Hero Section */
    .hero {
      text-align: center;
      padding: 100px 0;
      color: white;
    }

    .hero h1 {
      font-size: 3.5rem;
      font-weight: 800;
      margin-bottom: 20px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }

    /* Texto com gradiente dourado - Efeito de destaque */
    /* Origem: CSS moderno para textos com gradiente */
    .hero .highlight {
      background: linear-gradient(45deg, #FFD700, #FFA500); /* Gradiente dourado */
      -webkit-background-clip: text; /* Aplica gradiente ao texto (Safari) */
      -webkit-text-fill-color: transparent; /* Texto transparente */
      background-clip: text; /* Aplica gradiente ao texto (Firefox/Chrome) */
    }

    .hero p {
      font-size: 1.3rem;
      margin-bottom: 40px;
      opacity: 0.9;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    .hero-stats {
      display: flex;
      justify-content: center;
      gap: 60px;
      margin-top: 50px;
    }

    .stat-item {
      text-align: center;
    }

    .stat-number {
      display: block;
      font-size: 2.5rem;
      font-weight: 800;
      color: #FFD700;
      margin-bottom: 10px;
    }

    .stat-label {
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      opacity: 0.8;
    }

    /* Benefits Section */
    .benefits {
      padding: 100px 0;
      background: white;
    }

    .section-title {
      text-align: center;
      font-size: 2.5rem;
      margin-bottom: 20px;
      color: #333;
    }

    .section-subtitle {
      text-align: center;
      font-size: 1.2rem;
      color: #666;
      margin-bottom: 60px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    .benefits-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 30px;
      margin-top: 60px;
    }

    .benefit-card {
      background: white;
      padding: 40px 30px;
      border-radius: 20px;
      text-align: center;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
      border: 2px solid transparent;
    }

    /* Efeito hover dos cards de benefícios - Elevação 3D */
    /* Origem: Design de cards com profundidade e interação */
    .benefit-card:hover {
      transform: translateY(-10px); /* Move card para cima */
      border-color: #667eea; /* Muda cor da borda */
      box-shadow: 0 20px 40px rgba(102, 126, 234, 0.2); /* Sombra colorida */
    }

    /* Ícones circulares com gradiente - Elementos visuais */
    /* Origem: Design de ícones modernos com gradientes */
    .benefit-icon {
      width: 80px;
      height: 80px;
      background: linear-gradient(135deg, #667eea, #764ba2); /* Gradiente azul-roxo */
      border-radius: 50%; /* Formato circular */
      display: flex; /* Flexbox para centralização */
      align-items: center;
      justify-content: center;
      margin: 0 auto 20px;
      color: white;
      font-size: 2rem;
    }

    .benefit-card h3 {
      font-size: 1.4rem;
      margin-bottom: 15px;
      color: #333;
    }

    .benefit-card p {
      color: #666;
      line-height: 1.6;
    }

    /* Form Section */
    .form-section {
      padding: 100px 0;
      background: #f8f9fa;
    }

    .form-container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 60px;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
    }

    .form-title {
      text-align: center;
      font-size: 2.5rem;
      margin-bottom: 20px;
      color: #333;
    }

    .form-subtitle {
      text-align: center;
      font-size: 1.1rem;
      color: #666;
      margin-bottom: 50px;
    }

    .form-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 30px;
      margin-bottom: 40px;
    }

    .form-group {
      display: flex;
      flex-direction: column;
    }

    .form-group.full-width {
      grid-column: 1 / -1;
    }

    .form-label {
      font-weight: 600;
      margin-bottom: 8px;
      color: #333;
    }

    .form-input,
    .form-select,
    .form-textarea {
      padding: 15px;
      border: 2px solid #e1e5e9;
      border-radius: 10px;
      font-size: 1rem;
      transition: all 0.3s ease;
      background: #f8f9fa;
    }

    /* Efeito de foco nos campos do formulário - Glow azul */
    /* Origem: UX moderno para feedback visual de foco */
    .form-input:focus,
    .form-select:focus,
    .form-textarea:focus {
      outline: none; /* Remove outline padrão */
      border-color: #667eea; /* Borda azul no foco */
      background: white; /* Fundo branco */
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1); /* Glow azul sutil */
    }

    .form-textarea {
      resize: vertical;
      min-height: 120px;
    }

    .char-count {
      text-align: right;
      font-size: 0.85rem;
      color: #666;
      margin-top: 5px;
    }

    .char-count.warning {
      color: #f59e0b;
    }

    .char-count.danger {
      color: #ef4444;
    }

    /* File Upload */
    .file-upload {
      border: 2px dashed #e1e5e9;
      border-radius: 10px;
      padding: 40px 20px;
      text-align: center;
      background: #f8f9fa;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    /* Efeito hover na área de upload - Mudança de cor */
    /* Origem: Feedback visual para interação */
    .file-upload:hover {
      border-color: #667eea; /* Borda azul no hover */
      background: rgba(102, 126, 234, 0.05); /* Fundo azul muito sutil */
    }

    .file-upload input[type="file"] {
      display: none;
    }

    .upload-icon {
      font-size: 3rem;
      color: #667eea;
      margin-bottom: 15px;
    }

    .file-upload span {
      display: block;
      font-weight: 600;
      margin-bottom: 5px;
      color: #333;
    }

    .file-upload small {
      color: #666;
    }

    /* Checkbox */
    .checkbox-container {
      display: flex;
      align-items: flex-start;
      gap: 15px;
      cursor: pointer;
    }

    .checkbox-container input[type="checkbox"] {
      width: 20px;
      height: 20px;
      margin-top: 2px;
      accent-color: #667eea;
    }

    .checkbox-container label {
      cursor: pointer;
      line-height: 1.5;
    }

    /* Submit Button */
    /* Botão de envio com gradiente e sombra 3D */
    /* Origem: Design de botões modernos com profundidade */
    .submit-btn {
      background: linear-gradient(135deg, #667eea, #764ba2); /* Gradiente azul-roxo */
      color: white;
      border: none;
      padding: 18px 40px;
      border-radius: 50px; /* Formato pill/oval */
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease; /* Transição suave */
      display: block;
      width: 100%;
      max-width: 300px;
      margin: 0 auto;
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3); /* Sombra colorida */
    }

    /* Efeito hover do botão - Elevação e sombra maior */
    /* Origem: Microinteração para feedback tátil */
    .submit-btn:hover {
      transform: translateY(-2px); /* Move botão para cima */
      box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4); /* Sombra mais profunda */
    }

    .submit-btn:disabled {
      opacity: 0.7;
      cursor: not-allowed;
      transform: none;
    }

    /* Contact Section */
    .contact-section {
      padding: 100px 0;
      background: white;
    }

    .contact-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 60px;
      max-width: 1000px;
      margin: 0 auto;
    }

    .contact-info h3,
    .contact-cta h3 {
      font-size: 1.8rem;
      margin-bottom: 30px;
      color: #333;
    }

    .contact-item {
      display: flex;
      align-items: flex-start;
      gap: 15px;
      margin-bottom: 25px;
    }

    .contact-icon {
      width: 24px;
      height: 24px;
      color: #667eea;
      margin-top: 2px;
    }

    .contact-item div {
      flex: 1;
    }

    .contact-item strong {
      display: block;
      margin-bottom: 5px;
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: #333;
    }

    .contact-item a,
    .contact-item span {
      color: #666;
      text-decoration: none;
      line-height: 1.5;
    }

    .contact-item a:hover {
      color: #667eea;
    }

    .contact-cta p {
      color: #666;
      line-height: 1.6;
      margin-bottom: 30px;
    }

    .cta-btn {
      display: inline-block;
      background: #667eea;
      color: white;
      padding: 15px 30px;
      border-radius: 50px;
      text-decoration: none;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
    }

    /* Efeito hover do botão CTA - Elevação similar */
    /* Origem: Consistência visual com outros botões */
    .cta-btn:hover {
      transform: translateY(-2px); /* Move botão para cima */
      box-shadow: 0 12px 35px rgba(102, 126, 234, 0.4); /* Sombra mais profunda */
    }

    /* Footer */
    .footer {
      background: #333;
      color: white;
      padding: 60px 0 30px;
      text-align: center;
    }

    

    

    .footer-links {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }

    .footer-links a {
      color: white;
      text-decoration: none;
      transition: color 0.3s ease;
    }

    .footer-links a:hover {
      color: #667eea;
    }

    .footer-bottom {
      border-top: 1px solid #555;
      padding-top: 30px;
      color: #999;
    }

    /* File Info Display */
    .file-info {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 10px;
      margin-top: 15px;
      border: 1px solid #e1e5e9;
    }

    .file-icon {
      width: 32px;
      height: 32px;
      color: #667eea;
    }

    .file-details {
      flex: 1;
    }

    .file-name {
      font-weight: 600;
      margin-bottom: 5px;
      color: #333;
    }

    .file-size {
      font-size: 0.85rem;
      color: #666;
    }

    .remove-file {
      background: none;
      border: none;
      color: #ef4444;
      cursor: pointer;
      padding: 8px;
      border-radius: 6px;
      transition: all 0.3s ease;
    }

    .remove-file:hover {
      background: rgba(239, 68, 68, 0.1);
    }

    /* Field Errors */
    /* Mensagens de erro dos campos - Animação de entrada */
    /* Origem: UX moderno para feedback de validação */
    .field-error {
      color: #ef4444; /* Cor vermelha para erro */
      font-size: 0.85rem;
      margin-top: 5px;
      opacity: 0; /* Começa invisível */
      transform: translateY(-5px); /* Começa 5px acima */
      transition: all 0.3s ease; /* Transição suave */
    }

    /* Estado ativo da mensagem de erro - Visível e posicionada */
    /* Origem: Animação de entrada suave */
    .field-error.show {
      opacity: 1; /* Torna visível */
      transform: translateY(0); /* Move para posição final */
    }

    /* Success/Error States */
    .form-input.valid,
    .form-select.valid,
    .form-textarea.valid {
      border-color: #10b981;
    }

    .form-input.invalid,
    .form-select.invalid,
    .form-textarea.invalid {
      border-color: #ef4444;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .hero h1 {
        font-size: 2.5rem;
      }

      .hero-stats {
        flex-direction: column;
        gap: 30px;
      }

      .form-grid {
        grid-template-columns: 1fr;
        gap: 20px;
      }

      .form-container {
        padding: 40px 30px;
        margin: 0 20px;
      }

      .contact-grid {
        grid-template-columns: 1fr;
        gap: 40px;
      }

      .nav-links {
        display: none;
      }

      .header-content {
        justify-content: center;
      }
    }

    @media (max-width: 480px) {
      .hero h1 {
        font-size: 2rem;
      }

      .hero p {
        font-size: 1.1rem;
      }

      .form-container {
        padding: 30px 20px;
      }

      .submit-btn {
        padding: 15px 30px;
        font-size: 1rem;
      }
    }

    /* Loading Animation */
    .loading {
      position: relative;
    }

    /* Spinner de carregamento - Círculo girando */
    /* Origem: Indicador de loading padrão da web */
    .loading::after {
      content: ''; /* Pseudo-elemento vazio */
      position: absolute; /* Posicionamento absoluto */
      top: 50%; /* Centraliza verticalmente */
      left: 50%; /* Centraliza horizontalmente */
      width: 20px;
      height: 20px;
      margin: -10px 0 0 -10px; /* Ajusta para centralização perfeita */
      border: 2px solid transparent; /* Borda transparente */
      border-top: 2px solid white; /* Apenas topo visível */
      border-radius: 50%; /* Formato circular */
      animation: spin 1s linear infinite; /* Rotação infinita */
    }

    /* Animação de rotação do spinner - 360 graus */
    /* Origem: Rotação completa para efeito de loading */
    @keyframes spin {
      0% { transform: rotate(0deg); } /* Começa em 0 graus */
      100% { transform: rotate(360deg); } /* Termina em 360 graus */
    }

    /* Animations */
    /* Animação de entrada dos elementos - Fade + movimento para cima */
    /* Origem: Efeito de entrada suave e elegante */
    @keyframes fadeInUp {
      from {
        opacity: 0; /* Começa invisível */
        transform: translateY(30px); /* Começa 30px abaixo */
      }
      to {
        opacity: 1; /* Torna visível */
        transform: translateY(0); /* Move para posição final */
      }
    }

    /* Aplicação da animação fadeInUp aos elementos principais */
    /* Origem: Entrada sequencial dos componentes da página */
    .benefit-card,
    .form-container {
      animation: fadeInUp 0.6s ease-out; /* Animação de 0.6s com easing */
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="header-content">
      
      <nav>
        <ul class="nav-links">
          <li><a href="index.html">Início</a></li>
          <li><a href="index.html#sobre">Sobre</a></li>
          <li><a href="index.html#servicos">Serviços</a></li>
          <li><a href="index.html#portfolio">Portfólio</a></li>
          <li><a href="index.html#parceiros">Parceiros</a></li>
          <li><a href="contatos.html">Contatos</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="hero">
    <div class="container">
      <h1><span class="highlight">Junte-se</span> à nossa equipe</h1>
      <p>Faça parte de uma empresa em crescimento e participe de projetos inovadores no setor da construção</p>
      <div class="hero-stats">
        <div class="stat-item">
          <span class="stat-number">50+</span>
          <span class="stat-label">Projetos realizados</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">100+</span>
          <span class="stat-label">Profissionais</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">15+</span>
          <span class="stat-label">Anos de experiência</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Benefits Section -->
  <section class="benefits">
    <div class="container">
      <h2 class="section-title">Por que trabalhar conosco?</h2>
      <p class="section-subtitle">Descubra as vantagens de fazer parte da nossa equipe</p>
      <div class="benefits-grid">
        <div class="benefit-card">
          <div class="benefit-icon">🚀</div>
          <h3>Crescimento profissional</h3>
          <p>Oportunidades de evolução e desenvolvimento de carreira</p>
        </div>
        <div class="benefit-card">
          <div class="benefit-icon">💡</div>
          <h3>Ambiente inovador</h3>
          <p>Trabalho com as últimas tecnologias e métodos</p>
        </div>
        <div class="benefit-card">
          <div class="benefit-icon">🤝</div>
          <h3>Equipe colaborativa</h3>
          <p>Cultura de equipe e trabalho em grupo</p>
        </div>
        <div class="benefit-card">
          <div class="benefit-icon">🎯</div>
          <h3>Projetos variados</h3>
          <p>Diversidade de projetos e desafios técnicos</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Form Section -->
  <section class="form-section">
    <div class="container">
      <div class="form-container">
        <h2 class="form-title">Candidatura</h2>
        <p class="form-subtitle">Preencha o formulário abaixo para se candidatar</p>
        
        <form id="formCandidato" data-analytics-form="contact">
          <div class="form-grid">
            <div class="form-group">
              <label for="nome" class="form-label">Nome completo *</label>
              <input type="text" id="nome" name="nome" required class="form-input" placeholder="Seu nome completo">
              <div class="field-error" id="nome-error"></div>
            </div>
            
            <div class="form-group">
              <label for="email" class="form-label">E-mail *</label>
              <input type="email" id="email" name="email" required class="form-input" placeholder="seu@email.com">
              <div class="field-error" id="email-error"></div>
            </div>
            
            <div class="form-group">
              <label for="telefone" class="form-label">Telefone</label>
              <input type="tel" id="telefone" name="telefone" class="form-input" placeholder="(11) 99999-0000">
              <div class="field-error" id="telefone-error"></div>
            </div>
            
            <div class="form-group">
              <label for="cargo" class="form-label">Cargo desejado *</label>
              <select id="cargo" name="cargo" required class="form-select">
                <option value="">Selecione um cargo</option>
                <option value="engenheiro">Engenheiro Civil</option>
                <option value="arquiteto">Arquiteto</option>
                <option value="mestre">Mestre de Obras</option>
                <option value="pedreiro">Pedreiro</option>
                <option value="eletricista">Eletricista</option>
                <option value="encanador">Encanador</option>
                <option value="pintor">Pintor</option>
                <option value="ajudante">Ajudante</option>
                <option value="administrativo">Administrativo</option>
                <option value="comercial">Comercial</option>
                <option value="outro">Outro</option>
              </select>
              <div class="field-error" id="cargo-error"></div>
            </div>
            
            <div class="form-group full-width">
              <label for="experiencia" class="form-label">Experiência profissional</label>
              <textarea id="experiencia" name="experiencia" class="form-textarea" rows="3" placeholder="Descreva sua experiência na área..."></textarea>
            </div>
            
            <div class="form-group full-width">
              <label for="disponibilidade" class="form-label">Disponibilidade</label>
              <select id="disponibilidade" name="disponibilidade" class="form-select">
                <option value="">Selecione sua disponibilidade</option>
                <option value="imediata">Imediata</option>
                <option value="15_dias">Em 15 dias</option>
                <option value="30_dias">Em 30 dias</option>
                <option value="60_dias">Em 60 dias</option>
                <option value="outro">Outro</option>
              </select>
            </div>
            
            <div class="form-group full-width">
              <label for="mensagem" class="form-label">Mensagem de motivação *</label>
              <textarea id="mensagem" name="mensagem" required class="form-textarea" rows="4" maxlength="1000" placeholder="Explique por que você quer fazer parte da nossa equipe..."></textarea>
              <div class="char-count">0 / 1000 caracteres</div>
              <div class="field-error" id="mensagem-error"></div>
            </div>
            
            <div class="form-group full-width">
              <label for="cv_file" class="form-label">CV (opcional)</label>
              <div class="file-upload" onclick="document.getElementById('cv_file').click()">
                <input type="file" id="cv_file" name="cv_file" accept=".pdf,.doc,.docx">
                <div class="upload-icon">📁</div>
                <span>Clique para selecionar um arquivo</span>
                <small>PDF, DOC ou DOCX (máx 5MB)</small>
              </div>
            </div>
            
            <div class="form-group full-width">
              <div class="checkbox-container">
                <input type="checkbox" id="lgpd" required>
                <label for="lgpd">Autorizo o uso dos meus dados para o processo de recrutamento *</label>
              </div>
            </div>
          </div>
          
          <button type="submit" class="submit-btn" id="submitBtn">
            Enviar candidatura
          </button>
        </form>
      </div>
    </div>
  </section>

  <!-- Contact Section -->
  <section class="contact-section">
    <div class="container">
      <div class="contact-grid">
        <div class="contact-info">
          <h3>Informações RH</h3>
          <div class="contact-item">
            <div class="contact-icon">📧</div>
            <div>
              <strong>E-mail:</strong>
              <a href="mailto:rh@jfsilvaconstrucoes.com">rh@jfsilvaconstrucoes.com</a>
            </div>
          </div>
          
          <div class="contact-item">
            <div class="contact-icon">📞</div>
            <div>
              <strong>Telefone:</strong>
              <a href="tel:+32 471 89 56 22">+32 471 89 56 22</a>
            </div>
          </div>
          
          <div class="contact-item">
            <div class="contact-icon">📍</div>
            <div>
              <strong>Endereço:</strong>
              <span><br>Porto, Portugal</span>
            </div>
          </div>
        </div>
        
        <div class="contact-cta">
          <h3>Dúvidas?</h3>
          <p>Nossa equipe RH está aqui para ajudar. Entre em contato para mais informações.</p>
          <a href="contatos.html" class="cta-btn">Fale conosco</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      
      <div class="footer-links">
        <a href="index.html">Início</a>
        <a href="index.html#sobre">Sobre</a>
        <a href="index.html#servicos">Serviços</a>
        <a href="index.html#portfolio">Portfólio</a>
        <a href="index.html#parceiros">Parceiros</a>
        <a href="contatos.html">Contatos</a>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2024 JF SILVA CONSTRUÇÕES. Todos os direitos reservados.</p>
      </div>
    </div>
  </footer>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getFirestore, doc, setDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCKIdmJI5qJ7KiTJ-5Nws8bc82EJ8mHydM",
      authDomain: "jfsilvaconstrucoes-2e734.firebaseapp.com",
      projectId: "jfsilvaconstrucoes-2e734",
      storageBucket: "jfsilvaconstrucoes-2e734.firebasestorage.app",
      messagingSenderId: "870494421183",
      appId: "1:870494421183:web:e39a7895b04f85e54e460a"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const form = document.getElementById('formCandidato');
    const submitBtn = document.getElementById('submitBtn');

    // File upload handling
    const fileInput = document.getElementById('cv_file');
    fileInput.addEventListener('change', function(e) {
      const file = e.target.files[0];
      if (file) {
        displayFileInfo(file);
      }
    });

    function displayFileInfo(file) {
      // Remove existing file info
      const existingInfo = document.querySelector('.file-info');
      if (existingInfo) {
        existingInfo.remove();
      }

      // Validate file
      const maxSize = 5 * 1024 * 1024; // 5MB
      if (file.size > maxSize) {
        alert('Arquivo muito grande. Máximo 5MB.');
        fileInput.value = '';
        return;
      }

      const allowedTypes = ['.pdf', '.doc', '.docx'];
      const fileExtension = '.' + file.name.split('.').pop().toLowerCase();
      if (!allowedTypes.includes(fileExtension)) {
        alert('Formato não suportado. Use PDF, DOC ou DOCX.');
        fileInput.value = '';
        return;
      }

      // Create file info display
      const fileInfo = document.createElement('div');
      fileInfo.className = 'file-info';
      fileInfo.innerHTML = `
        <div class="file-icon">📄</div>
        <div class="file-details">
          <div class="file-name">${file.name}</div>
          <div class="file-size">${formatFileSize(file.size)}</div>
        </div>
        <button class="remove-file" onclick="removeFile()">❌</button>
      `;

      // Insert after file upload
      const fileUpload = document.querySelector('.file-upload');
      fileUpload.parentNode.insertBefore(fileInfo, fileUpload.nextSibling);
    }

    function removeFile() {
      fileInput.value = '';
      const fileInfo = document.querySelector('.file-info');
      if (fileInfo) {
        fileInfo.remove();
      }
    }

    function formatFileSize(bytes) {
      if (bytes === 0) return '0 Bytes';
      const k = 1024;
      const sizes = ['Bytes', 'KB', 'MB', 'GB'];
      const i = Math.floor(Math.log(bytes) / Math.log(k));
      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }

    // Character counter
    const mensagemTextarea = document.getElementById('mensagem');
    const charCount = document.querySelector('.char-count');

    mensagemTextarea.addEventListener('input', function() {
      const length = this.value.length;
      const maxLength = parseInt(this.getAttribute('maxlength'));
      
      charCount.textContent = `${length} / ${maxLength} caracteres`;
      
      // Update colors based on usage
      charCount.classList.remove('warning', 'danger');
      if (length > maxLength * 0.8) {
        charCount.classList.add('warning');
      }
      if (length > maxLength * 0.95) {
        charCount.classList.add('danger');
      }
    });

    // Form validation
    function validateField(field, fieldName) {
      const errorElement = document.getElementById(`${fieldName}-error`);
      if (!errorElement) return true;

      let isValid = true;
      let errorMessage = '';

      switch (fieldName) {
        case 'nome':
          if (field.value.length < 2) {
            isValid = false;
            errorMessage = 'Nome deve ter pelo menos 2 caracteres';
          }
          break;
        case 'email':
          const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          if (!emailRegex.test(field.value)) {
            isValid = false;
            errorMessage = 'E-mail inválido';
          }
          break;
        case 'telefone':
          if (field.value && field.value.length < 8) {
            isValid = false;
            errorMessage = 'Telefone deve ter pelo menos 8 dígitos';
          }
          break;
        case 'cargo':
          if (!field.value) {
            isValid = false;
            errorMessage = 'Selecione um cargo';
          }
          break;
        case 'mensagem':
          if (field.value.length < 5) {
            isValid = false;
            errorMessage = 'Mensagem deve ter pelo menos 5 caracteres';
          }
          break;
      }

      if (!isValid) {
        showFieldError(fieldName, errorMessage);
        field.classList.add('invalid');
        field.classList.remove('valid');
      } else {
        clearFieldError(fieldName);
        field.classList.remove('invalid');
        field.classList.add('valid');
      }

      return isValid;
    }

    function showFieldError(fieldName, message) {
      const errorElement = document.getElementById(`${fieldName}-error`);
      if (errorElement) {
        errorElement.textContent = message;
        errorElement.classList.add('show');
      }
    }

    function clearFieldError(fieldName) {
      const errorElement = document.getElementById(`${fieldName}-error`);
      if (errorElement) {
        errorElement.textContent = '';
        errorElement.classList.remove('show');
      }
    }

    function validateForm() {
      const fields = ['nome', 'email', 'cargo', 'mensagem'];
      let isValid = true;

      fields.forEach(fieldName => {
        const field = document.getElementById(fieldName);
        if (field && !validateField(field, fieldName)) {
          isValid = false;
        }
      });

      return isValid;
    }

    // Setup validation events
    const fields = ['nome', 'email', 'telefone', 'cargo', 'mensagem'];
    fields.forEach(fieldName => {
      const field = document.getElementById(fieldName);
      if (field) {
        field.addEventListener('blur', () => validateField(field, fieldName));
        field.addEventListener('input', () => clearFieldError(fieldName));
      }
    });

    // Form submission
    form.addEventListener('submit', async function(e) {
      e.preventDefault();
      
      if (!validateForm()) {
        alert('Por favor, corrija os erros no formulário antes de enviar.');
        return;
      }

      try {
        // Disable button and show loading
        submitBtn.disabled = true;
        submitBtn.classList.add('loading');
        submitBtn.textContent = 'Enviando...';

        // Extract form data manually to avoid File objects
        const data = {
          nome: form.nome.value,
          email: form.email.value,
          telefone: form.telefone.value,
          cargo: form.cargo.value,
          experiencia: form.experiencia.value,
          disponibilidade: form.disponibilidade.value,
          mensagem: form.mensagem.value,
          lgpd: form.lgpd.checked,
          createdAt: serverTimestamp()
        };

        // Add file info if CV was uploaded (only metadata, not the File object)
        const cvFile = fileInput.files[0];
        if (cvFile) {
          data.cv_filename = cvFile.name;
          data.cv_size = cvFile.size;
          data.cv_type = cvFile.type;
        }

        // Generate unique ID
        const id = (data.email || Date.now().toString()).replace(/\W/g, '').toLowerCase();
        
        // Save to Firestore
        await setDoc(doc(db, 'candidatos', id), data);
        await setDoc(doc(db, 'curriculum', id), {
          ...data,
          ultima_atualizacao: serverTimestamp(),
          versao: 1
        });

        // Success
        alert('Candidatura enviada com sucesso! Entraremos em contato em até 48 horas.');
        form.reset();
        
        // Clear file info
        const fileInfo = document.querySelector('.file-info');
        if (fileInfo) fileInfo.remove();
        
        // Reset character count
        charCount.textContent = '0 / 1000 caracteres';
        
        // Clear validation states
        const inputs = form.querySelectorAll('input, select, textarea');
        inputs.forEach(input => input.classList.remove('invalid', 'valid'));

      } catch (err) {
        console.error(err);
        alert('Erro ao enviar: ' + err.message);
      } finally {
        // Restore button
        submitBtn.disabled = false;
        submitBtn.classList.remove('loading');
        submitBtn.textContent = 'Enviar candidatura';
      }
    });

    // Make removeFile function global
    window.removeFile = removeFile;
  </script>
</body>
</html>
